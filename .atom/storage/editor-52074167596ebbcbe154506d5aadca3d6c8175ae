{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":0,"width":1366,"height":768},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/tai/develops/workspace/shellutils","buffers":[{"text":"#!/bin/sh\n\n#### logging\n# ロギング処理\n# _LOGLEVEL を export しておくと\n# そのログレベルに則ってログを出力してくれる。\n# _LOGLEVEL が設定されていない場合、\n# 自動的に INFO が設定される。\n#\n## ログレベル一覧\n# _LOGLEVEL_DEBUG=0\n# _LOGLEVEL_INFO=1\n# _LOGLEVEL_WARN=2\n# _LOGLEVEL_ERROR=3\n# _LOGLEVEL_FATAL=4\n# _LOGLEVEL_NONE=5\n#\n## ロギング関数\n# logDebug()\n# logInfo()\n# logWarn()\n# logError()\n# logFatal()\n#\n## ログ形式\n# [yyyy/MM/dd HH:mm:ss] [{LOGLEVEL}] {渡された引数全て}\n#\n_LOGLEVEL_DEBUG=0\n_LOGLEVEL_INFO=1\n_LOGLEVEL_WARN=2\n_LOGLEVEL_ERROR=3\n_LOGLEVEL_FATAL=4\n_LOGLEVEL_NONE=5\n${_LOGLEVEL:=${_LOGLEVEL_INFO}} 2> /dev/null\n\nfunction _logging() {\n  echo \"[`date '+%Y/%m/%d %H:%M:%S'`] $*\"\n}\n\nfunction logDebug() {\n  if [ ${_LOGLEVEL} -le ${_LOGLEVEL_DEBUG} ]; then\n    _logging \"[DEBUG]\" \"$*\"\n  fi\n}\nfunction logInfo() {\n  if [ ${_LOGLEVEL} -le ${_LOGLEVEL_INFO} ]; then\n    _logging \"[INFO ]\" \"$*\"\n  fi\n}\nfunction logWarn() {\n  if [ ${_LOGLEVEL} -le ${_LOGLEVEL_WARN} ]; then\n    _logging \"[WARN ]\" \"$*\"\n  fi\n}\nfunction logError() {\n  if [ ${_LOGLEVEL} -le ${_LOGLEVEL_ERROR} ]; then\n    _logging \"[ERROR]\" \"$*\"\n  fi\n}\nfunction logFatal() {\n  if [ ${_LOGLEVEL} -le ${_LOGLEVEL_FATAL} ]; then\n    _logging \"[FATAL]\" \"$*\"\n  fi\n}\n\n#### Error Handler\n \n## errCheck()\n# エラーハンドリングを行う。\n# 直前に実行したコマンドのリターンコードが0ではないとき、\n# プログラムを終了する。\n#\n## 使い方\n# command || errCheck\n#\nfunction errCheck() {\n  _RET=$?\n  if [ \"${_RET}\" != \"0\" ]; then\n    # error\n    logError \"return code : ${_RET}\"\n    exit 1;\n  fi\n}\n\n\n#### LockFile Checker\n_SCRIPT=`basename $0`\n_LOCKFILE=\"/tmp/.`basename $0 .sh`.lock\"\n\n## checkLockFile()\n# ロックファイルの有無をチェックする。\n# ロックファイルがあればファイルに記載された値のプロセスがあるか確認し、\n# プロセスがあればロックが有効とし処理を終了する。\n# ロックが有効でないときは、自分のプロセスIDをロックファイルに書き出す。\n#\n# ロックファイル名は /tmp/.{呼出し元のスクリプト名}.lock とする\n#\nfunction checkLockFile() {\n  if [ -f ${_LOCKFILE} ]; then\n    _PID=`cat ${_LOCKFILE}`\n    kill -0 ${_PID} && logWarn \"${_SCRIPT} is running.\" && exit 1;\n  fi\n  echo $$ > ${_LOCKFILE}\n}\n\n## removeLockFile()\n# ロックファイルを削除する。\n# \nfunction removeLockFile() {\n  rm ${_LOCKFILE}\n}\n\n","markers":{"markers":{"1":{"id":1,"range":[[88,0],[88,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":13,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tai/develops/workspace/shellutils/src/shellUtils.sh","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d750a3a83a286bb161f1ad0e15657927afeebad6","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":13,"softTabs":true,"scrollTop":1583,"scrollLeft":0,"displayBuffer":{"id":14,"softWrap":false,"editorWidthInChars":115,"tokenizedBuffer":{"bufferPath":"/Users/tai/develops/workspace/shellutils/src/shellUtils.sh","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/tai/develops/workspace/shellutils/src/shellUtils.sh","focused":false,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":true,"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/tai/develops/workspace/shellutils/src/shellUtils.sh":1397406981379},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":517564946},"tree-view":{"directoryExpansionStates":{"src":{}},"selectedPath":"/Users/tai/develops/workspace/shellutils/src/shellUtils.sh","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}